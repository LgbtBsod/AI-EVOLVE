# Panda3D Изометрическая Игра

Проект на Panda3D с изометрической камерой, включающий стартовый экран, экран паузы, экран настроек и игровую сцену с геометрическими объектами.

## Возможности

- **Стартовый экран** с кнопками "Новая игра", "Настройки" и "Выход"
- **Экран паузы** с возможностью продолжения игры, открытия настроек или возврата в главное меню
- **Экран настроек** с настройками полноэкранного режима, громкости и VSync
- **Игровая сцена** с различными геометрическими объектами (кубы, сферы, цилиндры, пирамиды)
- **Изометрическая камера** с возможностью поворота стрелками
- **Игрок** (зеленый персонаж) с управлением WASD
- **Враги** разных типов (красные, зеленые, синие пирамиды) с ИИ
- **Игровая механика** - враги преследуют игрока, спавнятся новые враги

## Установка

1. Установите Python 3.7 или выше
2. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Запуск

```bash
python main.py
```

## Управление

- **ESC** — Пауза/Продолжение игры
- **F1** — Отладочная информация ИИ (игровая сцена)
- **F2** — Информация о памяти ИИ (игровая сцена)
- **F3** — Переключение AI Debug режима (игровая сцена)
- **C** — Переключение режима камеры (следование/свободная)
- **Стрелки** — Поворот камеры (в игровой сцене)
- **IJKL** — Свободное движение камеры (в режиме свободной камеры)

Примечание: ручное движение игрока (WASD) и ручная атака отключены — персонажем управляет ИИ.

## Структура проекта

- `main.py` - Основной файл игры
- `game_states.py` - LEGACY менеджер состояний (используется экранами)
- `game_scene_new.py` - Улучшенная игровая сцена и интеграция с менеджерами (каноничный модуль)
- `game_scene.py` - LEGACY shim, реэкспортирует `GameScene` из `game_scene_new.py`
- `character.py` - Класс персонажа игрока
- `enemy.py` - Класс врагов с ИИ
- `screens/` - Папка с экранами игры
  - `start_screen_new.py` - Канонический стартовый экран
  - `start_screen.py` - LEGACY shim, реэкспортирует `StartScreen` из `start_screen_new.py`
  - `pause_screen.py` - Экран паузы
  - `settings_screen.py` - Экран настроек

- `core/` — Основные системы (состояния, сохранения, контент, и т.д.)
- `utils/logging_system.py` — Централизованная система логирования
- `hud.py` — Shim, реэкспорт `enhanced_hud.EnhancedHUD` как `HUD`

## Изменения архитектуры (актуально)

- Используется `game_states.GameStateManager` для совместимости с текущими экранами.
- Шимы для унификации импортов:
  - `hud.HUD` → `enhanced_hud.EnhancedHUD`
  - `game_scene.GameScene` → `game_scene_new.GameScene`
  - `screens.start_screen.StartScreen` → `screens.start_screen_new.StartScreen`
- Исправлены и унифицированы вызовы логирования в `utils/logging_system.py`.

## Завершение игры

В код добавлен метод `Game.quit()` для корректного выхода. Кнопка «Exit» на стартовом экране вызывает `game.quit()`.

## Особенности

- Изометрическая камера с фиксированным углом обзора
- Различные геометрические объекты с разными цветами
- Система состояний для переключения между экранами
- Полупрозрачные оверлеи для экранов паузы и настроек
- Настраиваемые параметры игры
