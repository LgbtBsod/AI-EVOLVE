#!/usr/bin/env python3
"""
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∫–æ–ø–∏—è–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
"""

from fix_python_files import (
    backup_manager,
    show_backup_status,
    manual_cleanup,
    smart_backup_management,
    force_cleanup_all_backups,
    cleanup_old_backups_by_age
)

def main():
    print("üß† –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —É–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∫–æ–ø–∏—è–º–∏")
    print("=" * 60)
    
    # 1. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
    print("\n1Ô∏è‚É£ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π:")
    show_backup_status()
    
    # 2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —É–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    print("\n2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:")
    backup_dir = smart_backup_management()
    print(f"   üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±—ç–∫–∞–ø–æ–≤: {backup_dir}")
    
    # 3. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å
    print("\n3Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å:")
    show_backup_status()
    
    # 4. –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º —Ä—É—á–Ω—É—é –æ—á–∏—Å—Ç–∫—É
    print("\n4Ô∏è‚É£ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä—É—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏:")
    print("   (–≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è - —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã)")
    
    response = input("   –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –æ—á–∏—Å—Ç–∫–æ–π? (y/N): ").strip().lower()
    if response == 'y':
        manual_cleanup()
    else:
        print("   –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞")
    
    # 5. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
    print("\n5Ô∏è‚É£ –°—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:")
    show_backup_status()
    
    # 6. –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º –æ—á–∏—Å—Ç–∫—É –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É
    print("\n6Ô∏è‚É£ –û—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π:")
    response = input("   –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (y/N): ").strip().lower()
    if response == 'y':
        cleanup_old_backups_by_age(7)
    else:
        print("   –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞")
    
    # 7. –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
    print("\n7Ô∏è‚É£ –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å:")
    show_backup_status()
    
    print("\n" + "=" * 60)
    print("‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
    print("üí° –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:")
    print("   - show_backup_status() - –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –±—ç–∫–∞–ø–æ–≤")
    print("   - manual_cleanup() - —Ä—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞")
    print("   - smart_backup_management() - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
    print("   - cleanup_old_backups_by_age(7) - –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤")
    print("   - force_cleanup_all_backups() - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö")
    print("=" * 60)
    
    # 8. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    print("\n8Ô∏è‚É£ –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:")
    print(f"   üìä –ú–∞–∫—Å–∏–º—É–º –±—ç–∫–∞–ø–æ–≤ –Ω–∞ —Ñ–∞–π–ª: {backup_manager.max_backups_per_file}")
    print(f"   üìÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç —Ñ–∞–π–ª–æ–≤: {backup_manager.max_backup_age_days} –¥–Ω–µ–π")
    print(f"   üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±—ç–∫–∞–ø–æ–≤: {backup_manager.backup_dir}")
    print(f"   üìã –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏: {backup_manager.integrity_dir}")
    
    # 9. –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    print("\n9Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:")
    try:
        new_max = int(input("   –ù–æ–≤—ã–π –º–∞–∫—Å–∏–º—É–º –±—ç–∫–∞–ø–æ–≤ –Ω–∞ —Ñ–∞–π–ª (—Ç–µ–∫—É—â–∏–π: {}): ".format(
            backup_manager.max_backups_per_file)) or backup_manager.max_backups_per_file)
        new_age = int(input("   –ù–æ–≤—ã–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –≤ –¥–Ω—è—Ö (—Ç–µ–∫—É—â–∏–π: {}): ".format(
            backup_manager.max_backup_age_days)) or backup_manager.max_backup_age_days)
        
        if new_max != backup_manager.max_backups_per_file or new_age != backup_manager.max_backup_age_days:
            backup_manager.max_backups_per_file = new_max
            backup_manager.max_backup_age_days = new_age
            backup_manager.save_config()
            print("   ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!")
        else:
            print("   ‚ûñ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∞")
    except ValueError:
        print("   ‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∞")
    
    print("\n" + "=" * 60)
    print("üéâ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
    print("üí° –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å —É–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—ç–∫–∞–ø–∞–º–∏!")
    print("=" * 60)

if __name__ == '__main__':
    main()
